<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Bachelor Degrees by City</title>
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
        <script src="http://dl.dropboxusercontent.com/u/21368/bootstrap-combobox/vendor/js/bootstrap.js" type="text/javascript"></script>

        <link href="http://dl.dropboxusercontent.com/u/21368/bootstrap-combobox/css/bootstrap-combobox.css" media="screen" rel="stylesheet" type="text/css">

        <link href="http://dl.dropboxusercontent.com/u/21368/bootstrap-combobox/vendor/css/bootstrap.css" media="screen" rel="stylesheet" type="text/css">

        <script src="http://dl.dropboxusercontent.com/u/21368/bootstrap-combobox/js/bootstrap-combobox.js" type="text/javascript"></script>



        <style type="text/css">

           circle {
                fill: rgba(250, 166, 26, .7);
                stroke: rgba(250, 166, 26, .8);
                stroke-width: 1;
                stroke-opacity: 1.0;
                fill-opacity: .8;
            }

            div {
                border: 0px solid black;
                padding: 5px;
                margin: 3px;
            }


            #container {
                height: 600px;
                width: 930px;
            }

            #textAll{
                position: absolute;
                width: 930px;
                height: 600px;
                top: 0px;
                left: 0px;
                padding: 0px !important;
                margin: 0px !important;
                z-index: -2;
            }

            .chartText {
                position: absolute;
                font-size: 11px;
                color: #555;
                z-index: -1;
            }

            .keyText{
                top: 56px;
                left: 660px;
                height:10px;
            }

            .srcText{
                top: 576px;
                left: 585px;
                height:10px;
            }

            .xText{
                top: 224px;
                left: -101px;
                height: 6px;
                text-align: right;
                -webkit-transform: rotate(270deg);
                -moz-transform: rotate(270deg);
                -o-transform: rotate(270deg);
                writing-mode: lr-tb;
            }

            .yText{
                top: 532px;
                left: 488px;
            }

            .combobox-container {
                position: absolute;
                left:660px; 
                top:20px;
            }

           .btn-group {
                position: relative;
                width: 340px;
                height: 30px;
                left: 0px;
                top: 10px;
            }

            .selected{
                fill: #ED1C24;
                stroke: #ED1C24;
                stroke-width: 2;

            }

            .axis path,
            .axis line {
                fill: none;
                stroke: #ccc;
                shape-rendering: crispEdges;
            }
            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }

            .tooltip {
                position: absolute;
                text-align: left;
                width: 160px;
                min-height: 12px;
                padding: 8px;
                font: 13px sans-serif;
                background: #fff;
                border: solid 1px #999;
                border-radius: 8px;
                visibility: hidden;
                opacity: 0.9;
            }

            .tipHed{
                font-size: 13px;
                font-weight: bold;
            }

            .tipPop{
                font-size: 11px;
                font-color: #999 ;
                margin-bottom: 25px;
            }

            .textBox {
                position: absolute;
                background-color: null;
                font-size: 14px;
                color: #404040;
                z-index: 1000;
            }

            .midland { left:75px; top:257px; width: 260px; }
            .boulder { left:680px; top:100px; width: 190px; text-align: right;}
            .raleighSJ { left:690px; top:415px; width: 190px; text-align: right; z-index:2; padding: 5px;}
            .college { left:210px; top:157px; width: 250px; text-align: right; }

            .midlandLine { border-right: 1px solid black; border-bottom: 1px solid black; position: absolute; left:65px; top:327px; height: 79px; width: 20px; z-index:-1;}
            .collegeLine { border: 1px solid black; position: absolute; left:480px; top:158px; height: 125px; width: 200px; z-index:-1;}
            .collegeLineb { border-top: 1px solid black; position: absolute; left:467px; top:170px; height: 2px; width: 4px; z-index:-1;}
            .boulderLine { border-top: 1px solid black; position: absolute; left:880px; top:116px; height: 2px; width: 14px; z-index:-1;}
            .raleighLine { border-left: 1px solid black; position: absolute; left:876px; top:267px; height: 140px; width: 2px; z-index:-11;}
            .sanjoseLine { border-left: 1px solid black; border-bottom: 1px solid black; position: absolute; left:818px; top:240px; height: 40px; width: 48px; z-index:-1;}

        </style>
    </head>
    <body>

       <div id="container">

          <div id="textAll">
          <div class="textBox midland">Midland, Texas, is the only metro where the percentage of residents with bachelor's degrees decreased.</div>
      
          <div class="textBox boulder">Boulder, Colo., has the highest attainment rate and percentage growth.</div>
              
          <div class="textBox raleighSJ">The technology hubs of Raleigh, N.C., and San Jose, Calif., rank third and fourth respectively in percentage growth since 1980.</div>
              
          <div class="textBox college">Midsize metros with larger universities tend to have a higher bachelor's attainment rate than other metros.</div>

              <div class='midlandLine'></div>  
              <div class='collegeLine'></div>  
              <div class='collegeLineb'></div> 
              <div class='boulderLine'></div>  
              <div class='raleighLine'></div>
              <div class='sanjoseLine'></div>
          </div>

          <select class="combobox" id="combobox">
              <option value="">Find a city</option>
              <option value='10180'>Abilene, TX</option>
              <option value='10420'>Akron, OH</option>
              <option value='10500'>Albany-Schenectady-Troy, NY</option>
              <option value='10580'>Albany, GA</option>
              <option value='10740'>Albuquerque, NM</option>
              <option value='10780'>Alexandria, LA</option>
              <option value='10900'>Allentown-Bethlehem-Easton, PA-NJ</option>
              <option value='11020'>Altoona, PA</option>
              <option value='11100'>Amarillo, TX</option>
              <option value='11180'>Ames, IA</option>
              <option value='11260'>Anchorage, AK</option>
              <option value='11300'>Anderson, IN</option>
              <option value='11340'>Anderson, SC</option>
              <option value='11460'>Ann Arbor, MI</option>
              <option value='11500'>Anniston-Oxford, AL</option>
              <option value='11540'>Appleton, WI</option>
              <option value='11700'>Asheville, NC</option>
              <option value='12020'>Athens-Clarke County, GA</option>
              <option value='12060'>Atlanta-Sandy Springs-Marietta, GA</option>
              <option value='12100'>Atlantic City-Hammonton, NJ</option>
              <option value='12220'>Auburn-Opelika, AL</option>
              <option value='12260'>Augusta-Richmond County, GA-SC</option>
              <option value='12420'>Austin-Round Rock-San Marcos, TX</option>
              <option value='12540'>Bakersfield-Delano, CA</option>
              <option value='12580'>Baltimore-Towson, MD</option>
              <option value='12620'>Bangor, ME</option>
              <option value='12700'>Barnstable Town, MA</option>
              <option value='12940'>Baton Rouge, LA</option>
              <option value='12980'>Battle Creek, MI</option>
              <option value='13020'>Bay City, MI</option>
              <option value='13140'>Beaumont-Port Arthur, TX</option>
              <option value='13380'>Bellingham, WA</option>
              <option value='13460'>Bend, OR</option>
              <option value='13740'>Billings, MT</option>
              <option value='13780'>Binghamton, NY</option>
              <option value='13820'>Birmingham-Hoover, AL</option>
              <option value='13900'>Bismarck, ND</option>
              <option value='13980'>Blacksburg-Christiansburg-Radford, VA</option>
              <option value='14020'>Bloomington-Normal, IL</option>
              <option value='14060'>Bloomington, IN</option>
              <option value='14260'>Boise City-Nampa, ID</option>
              <option value='14460'>Boston-Cambridge-Quincy, MA-NH</option>
              <option value='14500'>Boulder, CO</option>
              <option value='14540'>Bowling Green, KY</option>
              <option value='14740'>Bremerton-Silverdale, WA</option>
              <option value='14860'>Bridgeport-Stamford-Norwalk, CT</option>
              <option value='15180'>Brownsville-Harlingen, TX</option>
              <option value='15260'>Brunswick, GA</option>
              <option value='15380'>Buffalo-Niagara Falls, NY</option>
              <option value='15540'>Burlington-South Burlington, VT</option>
              <option value='15500'>Burlington, NC</option>
              <option value='15940'>Canton-Massillon, OH</option>
              <option value='15980'>Cape Coral-Fort Myers, FL</option>
              <option value='16180'>Carson City, NV</option>
              <option value='16220'>Casper, WY</option>
              <option value='16300'>Cedar Rapids, IA</option>
              <option value='16580'>Champaign-Urbana, IL</option>
              <option value='16620'>Charleston-North Charleston-Summerville, SC</option>
              <option value='16700'>Charleston, WV</option>
              <option value='16740'>Charlotte-Gastonia-Rock Hill, NC-SC</option>
              <option value='16820'>Charlottesville, VA</option>
              <option value='16860'>Chattanooga, TN-GA</option>
              <option value='16940'>Cheyenne, WY</option>
              <option value='16980'>Chicago-Joliet-Naperville, IL-IN-WI</option>
              <option value='17020'>Chico, CA</option>
              <option value='17140'>Cincinnati-Middletown, OH-KY-IN</option>
              <option value='17300'>Clarksville, TN-KY</option>
              <option value='17420'>Cleveland-Elyria-Mentor, OH</option>
              <option value='17460'>Cleveland, TN</option>
              <option value='17660'>Coeur dAlene, ID</option>
              <option value='17780'>College Station-Bryan, TX</option>
              <option value='17820'>Colorado Springs, CO</option>
              <option value='17860'>Columbia, MO</option>
              <option value='17900'>Columbia, SC</option>
              <option value='17980'>Columbus, GA-AL</option>
              <option value='18020'>Columbus, IN</option>
              <option value='18140'>Columbus, OH</option>
              <option value='18580'>Corpus Christi, TX</option>
              <option value='18700'>Corvallis, OR</option>
              <option value='18880'>Crestview-Fort Walton Beach-Destin, FL</option>
              <option value='19060'>Cumberland, MD-WV</option>
              <option value='19100'>Dallas-Fort Worth-Arlington, TX</option>
              <option value='19140'>Dalton, GA</option>
              <option value='19180'>Danville, IL</option>
              <option value='19340'>Davenport-Moline-Rock Island, IA-IL</option>
              <option value='19380'>Dayton, OH</option>
              <option value='19460'>Decatur, AL</option>
              <option value='19500'>Decatur, IL</option>
              <option value='19660'>Deltona-Daytona Beach-Ormond Beach, FL</option>
              <option value='19740'>Denver-Aurora-Broomfield, CO</option>
              <option value='19780'>Des Moines-West Des Moines, IA</option>
              <option value='19820'>Detroit-Warren-Livonia, MI</option>
              <option value='20020'>Dothan, AL</option>
              <option value='20100'>Dover, DE</option>
              <option value='20220'>Dubuque, IA</option>
              <option value='20260'>Duluth, MN-WI</option>
              <option value='20500'>Durham-Chapel Hill, NC</option>
              <option value='20740'>Eau Claire, WI</option>
              <option value='20940'>El Centro, CA</option>
              <option value='21060'>El Paso, TX</option>
              <option value='21140'>Elizabethtown, KY</option>
              <option value='21300'>Elkhart-Goshen, IN</option>
              <option value='21340'>Elmira, NY</option>
              <option value='21500'>Erie, PA</option>
              <option value='21660'>Eugene-Springfield, OR</option>
              <option value='21780'>Evansville, IN-KY</option>
              <option value='21820'>Fairbanks, AK</option>
              <option value='22020'>Fargo, ND-MN</option>
              <option value='22140'>Farmington, NM</option>
              <option value='22180'>Fayetteville-Springdale-Rogers, AR-MO</option>
              <option value='22220'>Fayetteville, NC</option>
              <option value='22380'>Flagstaff, AZ</option>
              <option value='22420'>Flint, MI</option>
              <option value='22520'>Florence-Muscle Shoals, AL</option>
              <option value='22500'>Florence, SC</option>
              <option value='22540'>Fond du Lac, WI</option>
              <option value='22660'>Fort Collins-Loveland, CO</option>
              <option value='22900'>Fort Smith, AR-OK</option>
              <option value='23060'>Fort Wayne, IN</option>
              <option value='23420'>Fresno, CA</option>
              <option value='23460'>Gadsden, AL</option>
              <option value='23540'>Gainesville, FL</option>
              <option value='23580'>Gainesville, GA</option>
              <option value='24020'>Glens Falls, NY</option>
              <option value='24140'>Goldsboro, NC</option>
              <option value='24220'>Grand Forks, ND-MN</option>
              <option value='24300'>Grand Junction, CO</option>
              <option value='24340'>Grand Rapids-Wyoming, MI</option>
              <option value='24500'>Great Falls, MT</option>
              <option value='24540'>Greeley, CO</option>
              <option value='24580'>Green Bay, WI</option>
              <option value='24660'>Greensboro-High Point, NC</option>
              <option value='24860'>Greenville-Mauldin-Easley, SC</option>
              <option value='24780'>Greenville, NC</option>
              <option value='25060'>Gulfport-Biloxi, MS</option>
              <option value='25180'>Hagerstown-Martinsburg, MD-WV</option>
              <option value='25260'>Hanford-Corcoran, CA</option>
              <option value='25420'>Harrisburg-Carlisle, PA</option>
              <option value='25540'>Hartford-West Hartford-East Hartford, CT</option>
              <option value='25620'>Hattiesburg, MS</option>
              <option value='25860'>Hickory-Lenoir-Morganton, NC</option>
              <option value='25980'>Hinesville-Fort Stewart, GA</option>
              <option value='26100'>Holland-Grand Haven, MI</option>
              <option value='26180'>Honolulu, HI</option>
              <option value='26300'>Hot Springs, AR</option>
              <option value='26380'>Houma-Bayou Cane-Thibodaux, LA</option>
              <option value='26420'>Houston-Sugar Land-Baytown, TX</option>
              <option value='26580'>Huntington-Ashland, WV-KY-OH</option>
              <option value='26620'>Huntsville, AL</option>
              <option value='26820'>Idaho Falls, ID</option>
              <option value='26900'>Indianapolis-Carmel, IN</option>
              <option value='26980'>Iowa City, IA</option>
              <option value='27060'>Ithaca, NY</option>
              <option value='27100'>Jackson, MI</option>
              <option value='27140'>Jackson, MS</option>
              <option value='27180'>Jackson, TN</option>
              <option value='27260'>Jacksonville, FL</option>
              <option value='27340'>Jacksonville, NC</option>
              <option value='27500'>Janesville, WI</option>
              <option value='27620'>Jefferson City, MO</option>
              <option value='27740'>Johnson City, TN</option>
              <option value='27780'>Johnstown, PA</option>
              <option value='27860'>Jonesboro, AR</option>
              <option value='27900'>Joplin, MO</option>
              <option value='28020'>Kalamazoo-Portage, MI</option>
              <option value='28100'>Kankakee-Bradley, IL</option>
              <option value='28140'>Kansas City, MO-KS</option>
              <option value='28420'>Kennewick-Pasco-Richland, WA</option>
              <option value='28660'>Killeen-Temple-Fort Hood, TX</option>
              <option value='28700'>Kingsport-Bristol-Bristol, TN-VA</option>
              <option value='28740'>Kingston, NY</option>
              <option value='28940'>Knoxville, TN</option>
              <option value='29020'>Kokomo, IN</option>
              <option value='29100'>La Crosse, WI-MN</option>
              <option value='29140'>Lafayette, IN</option>
              <option value='29180'>Lafayette, LA</option>
              <option value='29340'>Lake Charles, LA</option>
              <option value='29420'>Lake Havasu City-Kingman, AZ</option>
              <option value='29460'>Lakeland-Winter Haven, FL</option>
              <option value='29540'>Lancaster, PA</option>
              <option value='29620'>Lansing-East Lansing, MI</option>
              <option value='29700'>Laredo, TX</option>
              <option value='29740'>Las Cruces, NM</option>
              <option value='29820'>Las Vegas-Paradise, NV</option>
              <option value='29940'>Lawrence, KS</option>
              <option value='30020'>Lawton, OK</option>
              <option value='30140'>Lebanon, PA</option>
              <option value='30340'>Lewiston-Auburn, ME</option>
              <option value='30300'>Lewiston, ID-WA</option>
              <option value='30460'>Lexington-Fayette, KY</option>
              <option value='30620'>Lima, OH</option>
              <option value='30700'>Lincoln, NE</option>
              <option value='30780'>Little Rock-North Little Rock-Conway, AR</option>
              <option value='30860'>Logan, UT-ID</option>
              <option value='30980'>Longview, TX</option>
              <option value='31020'>Longview, WA</option>
              <option value='31100'>Los Angeles-Long Beach-Santa Ana, CA</option>
              <option value='31140'>Louisville-Jefferson County, KY-IN</option>
              <option value='31180'>Lubbock, TX</option>
              <option value='31340'>Lynchburg, VA</option>
              <option value='31420'>Macon, GA</option>
              <option value='31460'>Madera-Chowchilla, CA</option>
              <option value='31540'>Madison, WI</option>
              <option value='31700'>Manchester-Nashua, NH</option>
              <option value='31740'>Manhattan, KS</option>
              <option value='31860'>Mankato-North Mankato, MN</option>
              <option value='31900'>Mansfield, OH</option>
              <option value='32580'>McAllen-Edinburg-Mission, TX</option>
              <option value='32780'>Medford, OR</option>
              <option value='32820'>Memphis, TN-MS-AR</option>
              <option value='32900'>Merced, CA</option>
              <option value='33100'>Miami-Fort Lauderdale-Pompano Beach, FL</option>
              <option value='33140'>Michigan City-La Porte, IN</option>
              <option value='33260'>Midland, TX</option>
              <option value='33340'>Milwaukee-Waukesha-West Allis, WI</option>
              <option value='33460'>Minneapolis-St. Paul-Bloomington, MN-WI</option>
              <option value='33540'>Missoula, MT</option>
              <option value='33660'>Mobile, AL</option>
              <option value='33700'>Modesto, CA</option>
              <option value='33740'>Monroe, LA</option>
              <option value='33780'>Monroe, MI</option>
              <option value='33860'>Montgomery, AL</option>
              <option value='34060'>Morgantown, WV</option>
              <option value='34100'>Morristown, TN</option>
              <option value='34580'>Mount Vernon-Anacortes, WA</option>
              <option value='34620'>Muncie, IN</option>
              <option value='34740'>Muskegon-Norton Shores, MI</option>
              <option value='34820'>Myrtle Beach-North Myrtle Beach-Conway, SC</option>
              <option value='34900'>Napa, CA</option>
              <option value='34940'>Naples-Marco Island, FL</option>
              <option value='34980'>Nashville-Davidson--Murfreesboro--Franklin, TN</option>
              <option value='35300'>New Haven-Milford, CT</option>
              <option value='35380'>New Orleans-Metairie-Kenner, LA</option>
              <option value='35620'>New York-Northern N.J.-Long Island, NY-NJ-PA</option>
              <option value='35660'>Niles-Benton Harbor, MI</option>
              <option value='35840'>North Port-Bradenton-Sarasota, FL</option>
              <option value='35980'>Norwich-New London, CT</option>
              <option value='36100'>Ocala, FL</option>
              <option value='36140'>Ocean City, NJ</option>
              <option value='36220'>Odessa, TX</option>
              <option value='36260'>Ogden-Clearfield, UT</option>
              <option value='36420'>Oklahoma City, OK</option>
              <option value='36500'>Olympia, WA</option>
              <option value='36540'>Omaha-Council Bluffs, NE-IA</option>
              <option value='36740'>Orlando-Kissimmee-Sanford, FL</option>
              <option value='36780'>Oshkosh-Neenah, WI</option>
              <option value='36980'>Owensboro, KY</option>
              <option value='37100'>Oxnard-Thousand Oaks-Ventura, CA</option>
              <option value='37340'>Palm Bay-Melbourne-Titusville, FL</option>
              <option value='37380'>Palm Coast, FL</option>
              <option value='37460'>Panama City-Lynn Haven-Panama City Beach, FL</option>
              <option value='37620'>Parkersburg-Marietta-Vienna, WV-OH</option>
              <option value='37700'>Pascagoula, MS</option>
              <option value='37860'>Pensacola-Ferry Pass-Brent, FL</option>
              <option value='37900'>Peoria, IL</option>
              <option value='37980'>Philadelphia-Camden-Wilmington, PA-NJ-DE-MD</option>
              <option value='38060'>Phoenix-Mesa-Glendale, AZ</option>
              <option value='38220'>Pine Bluff, AR</option>
              <option value='38300'>Pittsburgh, PA</option>
              <option value='38340'>Pittsfield, MA</option>
              <option value='38540'>Pocatello, ID</option>
              <option value='38860'>Port St. Lucie, FL</option>
              <option value='38900'>Portland-South Portland-Biddeford, ME</option>
              <option value='38940'>Portland-Vancouver-Hillsboro, OR-WA</option>
              <option value='39100'>Poughkeepsie-Newburgh-Middletown, NY</option>
              <option value='39140'>Prescott, AZ</option>
              <option value='39300'>Providence-New Bedford-Fall River, RI-MA</option>
              <option value='39340'>Provo-Orem, UT</option>
              <option value='39380'>Pueblo, CO</option>
              <option value='39460'>Punta Gorda, FL</option>
              <option value='39540'>Racine, WI</option>
              <option value='39580'>Raleigh-Cary, NC</option>
              <option value='39660'>Rapid City, SD</option>
              <option value='39740'>Reading, PA</option>
              <option value='39820'>Redding, CA</option>
              <option value='39900'>Reno-Sparks, NV</option>
              <option value='40060'>Richmond, VA</option>
              <option value='40140'>Riverside-San Bernardino-Ontario, CA</option>
              <option value='40220'>Roanoke, VA</option>
              <option value='40340'>Rochester, MN</option>
              <option value='40380'>Rochester, NY</option>
              <option value='40420'>Rockford, IL</option>
              <option value='40580'>Rocky Mount, NC</option>
              <option value='40660'>Rome, GA</option>
              <option value='40900'>Sacramento-Arden Arcade-Roseville, CA</option>
              <option value='40980'>Saginaw-Saginaw Township North, MI</option>
              <option value='41420'>Salem, OR</option>
              <option value='41500'>Salinas, CA</option>
              <option value='41540'>Salisbury, MD</option>
              <option value='41620'>Salt Lake City, UT</option>
              <option value='41660'>San Angelo, TX</option>
              <option value='41700'>San Antonio-New Braunfels, TX</option>
              <option value='41740'>San Diego-Carlsbad-San Marcos, CA</option>
              <option value='41860'>San Francisco-Oakland-Fremont, CA</option>
              <option value='41940'>San Jose-Sunnyvale-Santa Clara, CA</option>
              <option value='42020'>San Luis Obispo-Paso Robles, CA</option>
              <option value='41780'>Sandusky, OH</option>
              <option value='42060'>Santa Barbara-Santa Maria-Goleta, CA</option>
              <option value='42100'>Santa Cruz-Watsonville, CA</option>
              <option value='42140'>Santa Fe, NM</option>
              <option value='42220'>Santa Rosa-Petaluma, CA</option>
              <option value='42340'>Savannah, GA</option>
              <option value='42540'>Scranton--Wilkes-Barre, PA</option>
              <option value='42660'>Seattle-Tacoma-Bellevue, WA</option>
              <option value='42680'>Sebastian-Vero Beach, FL</option>
              <option value='43100'>Sheboygan, WI</option>
              <option value='43300'>Sherman-Denison, TX</option>
              <option value='43340'>Shreveport-Bossier City, LA</option>
              <option value='43580'>Sioux City, IA-NE-SD</option>
              <option value='43620'>Sioux Falls, SD</option>
              <option value='43780'>South Bend-Mishawaka, IN-MI</option>
              <option value='43900'>Spartanburg, SC</option>
              <option value='44060'>Spokane, WA</option>
              <option value='44100'>Springfield, IL</option>
              <option value='44140'>Springfield, MA</option>
              <option value='44180'>Springfield, MO</option>
              <option value='44220'>Springfield, OH</option>
              <option value='41060'>St. Cloud, MN</option>
              <option value='41100'>St. George, UT</option>
              <option value='41140'>St. Joseph, MO-KS</option>
              <option value='41180'>St. Louis, MO-IL</option>
              <option value='44300'>State College, PA</option>
              <option value='44600'>Steubenville-Weirton, OH-WV</option>
              <option value='44700'>Stockton, CA</option>
              <option value='44940'>Sumter, SC</option>
              <option value='45060'>Syracuse, NY</option>
              <option value='45220'>Tallahassee, FL</option>
              <option value='45300'>Tampa-St. Petersburg-Clearwater, FL</option>
              <option value='45460'>Terre Haute, IN</option>
              <option value='45500'>Texarkana, TX-Texarkana, AR</option>
              <option value='45780'>Toledo, OH</option>
              <option value='45820'>Topeka, KS</option>
              <option value='45940'>Trenton-Ewing, NJ</option>
              <option value='46060'>Tucson, AZ</option>
              <option value='46140'>Tulsa, OK</option>
              <option value='46220'>Tuscaloosa, AL</option>
              <option value='46340'>Tyler, TX</option>
              <option value='46540'>Utica-Rome, NY</option>
              <option value='46660'>Valdosta, GA</option>
              <option value='46700'>Vallejo-Fairfield, CA</option>
              <option value='47020'>Victoria, TX</option>
              <option value='47220'>Vineland-Millville-Bridgeton, NJ</option>
              <option value='47260'>Virginia Beach-Norfolk-Newport News, VA-NC</option>
              <option value='47300'>Visalia-Porterville, CA</option>
              <option value='47380'>Waco, TX</option>
              <option value='47580'>Warner Robins, GA</option>
              <option value='47900'>Washington-Arlington-Alexandria, DC-VA-MD</option>
              <option value='47940'>Waterloo-Cedar Falls, IA</option>
              <option value='48140'>Wausau, WI</option>
              <option value='48300'>Wenatchee-East Wenatchee, WA</option>
              <option value='48540'>Wheeling, WV-OH</option>
              <option value='48660'>Wichita Falls, TX</option>
              <option value='48620'>Wichita, KS</option>
              <option value='48700'>Williamsport, PA</option>
              <option value='48900'>Wilmington, NC</option>
              <option value='49020'>Winchester, VA-WV</option>
              <option value='49180'>Winston-Salem, NC</option>
              <option value='49340'>Worcester, MA</option>
              <option value='49420'>Yakima, WA</option>
              <option value='49620'>York-Hanover, PA</option>
              <option value='49660'>Youngstown-Warren-Boardman, OH-PA</option>
              <option value='49700'>Yuba City, CA</option>
              <option value='49740'>Yuma, AZ</option>
          </select>
          
          <div class="btn-group" data-toggle="buttons-radio">
            <button id="btn1980"class="btn btn">1980 Bachelor's Rate</button>
            <button id="btn2010" class="btn btn active">2010 Bachelor's Rate</button>
         </div>
          


          <div id="chartContainer"></div> 

          <div class="chartText xText">Share of the population with a bachelor's degree or higher</div>
          <div class="chartText yText">Change in share of the population with a bachelor's degree or higher, 1980-2010</div>
          <div class="chartText keyText"><img src="http://assets.nationaljournal.com/gfx/bacity/circle.png" height="10" width="10"> Circle size equal to population of metro area.</div>
          <div class="chartText srcText">Source: Brookings Institution analysis of Census Bureau data</div>
        </div>  

        <script type="text/javascript">

$(document).ready(function(){

var h = 530;
var w = 900;
var padding = 30;
var URLjson = "bachtowns.json";

function zIndex(evt) {
    var element = evt.target; //get node reference
    element.parentNode.appendChild(element); //appendChild after the last child
  }   


        //pull in JSON
        d3.json(URLjson, function(testJson){


            //Scaling: domain = data, range = svg area
            var xScale = d3.scale.linear()
                           .domain([-1, 20])
                           .range([padding, w-padding]);
           
            var yScale = d3.scale.linear()
                             .domain([8, 60])
                             .range([h-padding, padding]);

            var rScale = d3.scale.linear()
                             .domain([0, d3.max(testJson, function(d) { 
                                return d.AREA10; 
                              })])
                             .range([0, 32]); //bigger the max, bigger the circle

            //Axis
            var xAxis = d3.svg.axis()
                          .scale(xScale)
                          .orient("bottom")
                          .ticks(5);

            var yAxis = d3.svg.axis()
                          .scale(yScale)
                          .orient("left")
                           .ticks(5);

            //simple scatter bubble chart
            var svg = d3.select("#chartContainer")  
                      .append('svg')
                      .attr("width", w)
                      .attr("height", h);
 
            var circles = svg.selectAll("circle")
                      .data(testJson)
                      .enter()
                      .append("circle");

               circles.attr("id", function(d,i) {
                                    return d.NAME
                                    })
                      .attr("data-slug", function(d,i) {
                                   return d.SLUG
                                   })
                      .attr("cx", function(d,i) {
                                    return xScale(d.ATTCHANGE)
                                    })
                      .attr("cy", function(d,i) {
                                    return yScale(d.ATT10) 
                                    })
                      .attr("r", function(d) {
                                    return rScale(d.AREA10)
                                    })
           //           .attr("onmouseover", "zIndex(evt)")
                      .on("mouseover", mouseover)
                      .on("mousemove", mousemove)
                      .on("mouseout", mouseout)

            //tooltip
            var tooltip = d3.select("#container")
                      .append("div")
                      .attr("id", "tooltip")
                      .attr("class", "tooltip")

            function updatePosition(event) {
                    var ttid = "#tooltip";
                    var xOffset = 10;
                    var yOffset = 10;

                    var ttw = $(ttid).width();
                    var tth = $(ttid).height();
                    var wscrY = $(window).scrollTop();
                    var wscrX = $(window).scrollLeft();
                    var curX = (document.all) ? event.clientX + wscrX : event.pageX;
                    var curY = (document.all) ? event.clientY + wscrY : event.pageY;
                    var ttleft = ((curX - wscrX + xOffset * 2 + ttw) > $(window).width()) ? curX - ttw - xOffset * 2 : curX + xOffset;
                    if (ttleft < wscrX + xOffset) {
                        ttleft = wscrX + xOffset;
                    }
                    var tttop = ((curY - wscrY + yOffset * 2 + tth) > $(window).height()) ? curY - tth - yOffset * 2 : curY + yOffset;
                    if (tttop < wscrY + yOffset) {
                        tttop = curY + yOffset;
                    }
                    $(ttid).css('top', tttop + 'px').css('left', ttleft + 'px');
                }

            //Rollover attributes
            function mouseover(d){
                                d3.select(this)
                                  .style({'stroke-width':2,'stroke':'#000'})
                                  
                                tooltip
                                  .style("visibility", "visible") 
                              };

            function mousemove(d, i){
                                tooltip
                                .style("visibility", "visible")
                                .style("top", d3.event.pageY + "px")
                                .style("left", d3.event.pageX + "px")
                                .html("<span class='tipHed'>" + d.NAME + "</span> <br> <span class='tipPop'> Population: "+ d.POP10 + " </span><br> <b>Share with bachelor's degree or higher </b><br> 1980: <b>" + d.ATT80 + "% </b> <br> 2010: <b>" + d.ATT10 + "% </b> <br> Percentage change: <b>" + d.ATTCHANGE + "% </b>")

                                 updatePosition(event);

                              };                  
                              
            function mouseout(d){
                                d3.select(this)
                                  .style({'stroke-width':1, 'stroke-opacity':.8,'stroke':'rgb(250, 166, 26)'})

                                tooltip
                                  .style("visibility", "hidden")
                              };

            //call axis
                svg.append("g")
                      .attr("class", "axis")
                      .attr("transform", "translate(0, " + (h-padding) + ")")
                      .call(xAxis);

                svg.append("g")
                      .attr("class", "axis")
                      .attr("transform", "translate(" + padding + ",0)")
                      .call(yAxis);


            //button and transitions
            var delay = function(d, i) { return i * 2; };

            $("#btn1980").click(function(e) {

              $("#textAll").hide()

               circles.transition()
                      .duration(1300)
                      .delay(delay)
                      .ease("elastic")
                      .attr("cy", function(d,i) {
                                    return yScale(d.ATT80)
                                    })

            });

            $("#btn2010").click(function(e) {

               circles.transition()
                      .duration(1300)
                      .delay(delay)
                      .ease("elastic")
                      .attr("cy", function(d,i) {
                                    return yScale(d.ATT10)
                                    })

               $("#textAll").delay(1500).fadeIn(5000);

            });


              //search
              $('.combobox').combobox()


              $('input[type="hidden"]').change(function(){
               var citySlug = $(this).val();
               d3.selectAll('circle').classed("selected", false);
               d3.selectAll('circle[data-slug="' + citySlug + '"]').classed("selected", true);
              });


               //console.log(d3.max(testJson, function(d) { return d.SLUG;  }))

        })


 });

        </script>


    </body>
</html>    